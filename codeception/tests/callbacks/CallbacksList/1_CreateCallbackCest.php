<?php
use \CallbacksTester;

class CreateCallbackCest
{
//    public function _before()
//    {
//    }
//
//    public function _after()
//    {
//    }

    // tests
    public function Autorization(CallbacksTester $I)
    {
        InitTest::Login($I);
        $I->amOnPage("/");
        $I->waitForText("Заказать звонок");
    }
    
    
    public function NamesInCreate(CallbacksTester $I)
    {
        $I->amOnPage('/');
        $I->waitForText('Заказать звонок');
        $I->see('Заказать звонок', 'html/body/div[1]/div[1]/header/div[2]/div/div/div[1]/div/div[2]/button');
        $I->click(CallbacksPage::$OrderCallButton);
        $I->waitForElement(CallbacksPage::$CallMeButton);
        $I->see('Заказать звонок', './/*[@id="ordercall"]/div[1]/div');
        $I->see('Имя:', 'label > span.title');
        $I->see('Телефон:', '//form[@id="data-callback"]/label[2]/span');
        $I->see('Комментарий:', '//form[@id="data-callback"]/label[3]/span');
        $I->see('Позвоните мне', 'div.btn-form > button[type="submit"]');
    }
    
    /**
     * @guy CallbacksTester\CallbacksSteps
     */
    
    public function RequiredFieldsInCreate(CallbacksTester\CallbacksSteps $I)
    {
        $name='';
        $phone='';
        $comment='';
        $I->CreateCallback($name, $phone, $comment);
        $I->waitForElement('.//*[@id="data-callback"]/label[1]/span[2]/label');
        $I->see('Поле Имя является обязательным.', './/*[@id="data-callback"]/label[1]/span[2]/label');
        $I->see('Поле Телефон является обязательным.', './/*[@id="data-callback"]/label[2]/span[2]/label');
    }
    
    
    public function ClosedWindowButton(CallbacksTester $I)
    {
        $I->amOnPage('/');
        $I->waitForText('Заказать звонок');
        $I->see('Заказать звонок', 'html/body/div[1]/div[1]/header/div[2]/div/div/div[1]/div/div[2]/button');
        $I->click(CallbacksPage::$OrderCallButton);
        $I->waitForElement(CallbacksPage::$CallMeButton);
        $I->click('.//*[@id="ordercall"]/button');
        $I->waitForElementNotVisible('.//*[@id="ordercall"]');
    }
    
     /**
     * @guy CallbacksTester\CallbacksSteps
     */
    
    public function TypesOfSymbolsInCreate(CallbacksTester\CallbacksSteps $I)
    {
        $name='qwert12345!@#$%^&*()_+|}{:?></.,;[]`йцуке';
        $phone='qwert12345!@#$%^&*()_+|}{:?></.,;[]`йцуке';
        $comment='qwert12345!@#$%^&*()_+|}{:?></.,;[]`йцуке';
        $I->CreateCallback($name, $phone, $comment);        
        $I->waitForElement('.//*[@id="data-callback"]/label[2]/span[2]/label');
        $I->see('Поле Телефон должно содержать только цифры.', './/*[@id="data-callback"]/label[2]/span[2]/label');
        $I->fillField(CallbacksPage::$TelephoneCreate, 'qwert1');
        $I->click(CallbacksPage::$CallMeButton);
        $I->waitForElement('.//*[@id="data-callback"]/label[2]/span[2]/label');
        $I->see('Поле Телефон должно содержать только цифры.', './/*[@id="data-callback"]/label[2]/span[2]/label');
        $I->fillField(CallbacksPage::$TelephoneCreate, '2345!@#$%^&*()_+|}{');
        $I->click(CallbacksPage::$CallMeButton);
        $I->waitForElement('.//*[@id="data-callback"]/label[2]/span[2]/label');
        $I->see('Поле Телефон должно содержать только цифры.', './/*[@id="data-callback"]/label[2]/span[2]/label');
        $I->fillField(CallbacksPage::$TelephoneCreate, '65йцуке');
        $I->click(CallbacksPage::$CallMeButton);
        $I->waitForElement('.//*[@id="data-callback"]/label[2]/span[2]/label');
        $I->see('Поле Телефон должно содержать только цифры.', './/*[@id="data-callback"]/label[2]/span[2]/label');
        $I->fillField(CallbacksPage::$TelephoneCreate, '12345');
        $I->click(CallbacksPage::$CallMeButton);
        $I->waitForElement('div.text-el>h1');
        $povid=$I->grabTextFrom('div.text-el>h1');
        $pov=$I->grabTextFrom('div.text-el>div');
        $I->waitForElementNotVisible('.//*[@id="ordercall"]');
        $I->amOnPage('/admin/settings#setings');
        $I->click(".//*[@id='textEditor']");
        $I->click(".//*[@id='textEditor']/option[3]");
        $I->click(".//*[@id='mainContent']/div/section/div[1]/div[2]/div/button");
        $I->waitForElementVisible('.alert.in.fade.alert-success');
        $I->see('Настройки сохранены');
        $I->waitForElementNotVisible('.alert.in.fade.alert-success');
        InitTest::ClearAllCach($I);
        $I->click(NavigationBarPage::$Settings);
        $I->click(NavigationBarPage::$SettingsShopSettings);
        $I->waitForText('Настройки магазина');
        $I->click('.//*[@id="mainContent"]/section/div[2]/div[1]/ul/li[4]/a');
        $I->waitForElement('//*[@id="notif"]/table/thead/tr/th');        
        $I->executeJS("var container = document.createElement('input');
         container.id = 'grabfromh1';
                container.type = 'hidden';
         container.value = window.frames[1].document.body.getElementsByTagName('h1')[0].innerHTML+'_'+window.frames[1].document.body.getElementsByTagName('div')[0].innerHTML;
         document.body.insertBefore(container, document.body.firstChild)");
        $I->wait("1");
        $text = $I->grabValueFrom('#grabfromh1');
        $text = explode("_", $text);        
        $I->comment("$text[0]"."$text[1]");
        $I->assertEquals($povid, $text[0]);
        $I->assertEquals($pov, $text[1]);
        InitTest::ClearAllCach($I);
    }
    
     /**
     * @guy CallbacksTester\CallbacksSteps
     */
    
//     public function OneSymbolsCreate(CallbacksTester\CallbacksSteps $I)
//    {
//        InitTest::Loguot($I);
//        $name='й';
//        $phone='1';
//        $comment='1';
//        $I->CreateCallback($name, $phone, $comment);
//        $I->waitForElementNotVisible('.//*[@id="ordercall"]');
//        InitTest::Login($I);        
//        $I->CheckListLandingAndEditingPage($name, $phone, $comment);        
//    }
    
     /**
     * @guy CallbacksTester\CallbacksSteps
     */
    
    public function Symbols128Create(CallbacksTester\CallbacksSteps $I)
    {
        $I->amOnPage(CallbacksPage::$URL);
        InitTest::Login($I);
        $name='12345678901234567890123456789012345 7890123456789012345678901234567890123456789012 456789012345678901234567890123456789012345678';
        $phone='12345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678';
        $comment='12345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678';
        $I->CreateCallback($name, $phone, $comment);
        $I->waitForElement('.//*[@id="data-callback"]/label[2]/span[2]/label');
        $I->see('Поле Телефон не может превышать 50 символов в длину.', './/*[@id="data-callback"]/label[2]/span[2]/label');
        $phone1='12345678901234567890123456789012345678901234567890';
        $I->fillField(CallbacksPage::$TelephoneCreate, "$phone1");
        $I->click(CallbacksPage::$CallMeButton);
        $I->waitForElementNotVisible('.//*[@id="ordercall"]');                
        $I->CheckListLandingAndEditingPage($name, $phone1, $comment);
        InitTest::ClearAllCach($I);
    }
    
     /**
     * @guy CallbacksTester\CallbacksSteps
     */
    
    public function Symbols255Create(CallbacksTester\CallbacksSteps $I)
    {
        $name='123456789012345678901234567890123456789012345 67890123456789012345678901234567890 1234567890123456789012345678901234567 89012345678456789012345678901234567890123456789012345678901234567890123 567890123456789012345678901234567890123456789012345678901234567';
        $phone='12345678901234567890123456789012345678901234567890';
        $comment='123456789012345678 0123456789012345678901234567890123456789 1234567890123456789012345678901234567890123456789012345678901234567812345678901 3456789012345678901234567890123456789012345678901 34567890123456789012345678901234567890123456789012345678901234567';
        $I->CreateCallback($name, $phone, $comment);
        $I->waitForElementNotVisible('.//*[@id="ordercall"]');                
        $I->CheckListLandingAndEditingPage($name, $phone, $comment);
        InitTest::ClearAllCach($I);
    }
    
     /**
     * @guy CallbacksTester\CallbacksSteps
     */
    
    public function Symbols256Create(CallbacksTester\CallbacksSteps $I)
    {
        $name='12345678901234567890123456789 12345678901234567890123456789012345678901 34567890123456789012345678901234567890123456 89012345678 2345678901234567890123456789012345678901234567890123456 8901234567890123456789012345678901234567890123456789 123456789012345678';
        $phone='12345678901234567890123456789012345678901234567890';
        $comment='1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567812345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678';
        $I->CreateCallback($name, $phone, $comment);
        $I->waitForElementNotVisible('.//*[@id="ordercall"]');
        $name1="12345678901234567890123456789 12345678901234567890123456789012345678901 34567890123456789012345678901234567890123456 89012345678 2345678901234567890123456789012345678901234567890123456 8901234567890123456789012345678901234567890123456789 12345678901234567";
        $I->CheckListLandingAndEditingPage($name1, $phone, $comment);        
    }
    
     /**
     * @guy CallbacksTester\CallbacksSteps
     */
    
    public function Symbols10000Create(CallbacksTester\CallbacksSteps $I)
    {     
        $name='Daniel';
        $phone='4567';
        $comment='1234567890123456789012345678901234 67890123456789012345678901234567890123456789 12345678901234567890123456789012345 7890123456789012 45678901234567890123456789012345678901234 67890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012 456789012345678901234567890123456789012345678 01234567890123456789012345678901234567 9012345678901234567890123456 890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567 901234567890123456789012 456789012345678901234567 9012345678901234567890123 5678901234567890123 56789012345678901234567890123456789012 456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901 3456789012345678901234567890123456789012 45678901234567 9012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789 12345678901234567890123456789012 4567890123456789012345678901234 67890123456789012345678901234567890123456 89012345678901234567890123456789012345 789012345678901234567890123456789012 45678901234567890123456789012345678901234567 901234567890123456789012345678901234567 9012345678901234567890123456789012 456789012345678901234567890123456789012345678901234 67890123456789012345678901234567 901234567890123456789012345678901234567 90123456789012345678901234567890123456789012345678901234567890123456789012 45678901234567890123456789012345678901234567890 2345678901234567890123456789012345678901234567890 234567890123456789012345678901234567890123456789012345 78901234567890123456789 12345678901234567890123456789012345678 012345678901234567890123456789001234567890 12345678900123456789001234567890012345678 0012345678900123456789001234567890012345 7890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001 34567890012345678900123456789001234567890012345678900123456789001234567890 12345678900123456789001234567890012345678900123456789001234567890012345678 001234567890012345678900123456789001234567890012345678900 2345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456';
        $I->CreateCallback($name, $phone, $comment);
        $I->waitForElementNotVisible('.//*[@id="ordercall"]');
        $I->CheckListLandingAndEditingPage($name, $phone, $comment);
        InitTest::ClearAllCach($I);
    }
    
    /**
     * @guy CallbacksTester\CallbacksSteps
     */
    
    public function Symbols0Create(CallbacksTester\CallbacksSteps $I)
    {     
        $name='Sasha';
        $phone='44646644';        
        $I->CreateCallback($name, $phone);
        $I->waitForElementNotVisible('.//*[@id="ordercall"]');
        $I->CheckListLandingAndEditingPage($name, $phone);
    }
    
    
    
    
    
    
}